<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ERtools - 15&nbsp; Ações</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./carrega.html" rel="next">
<link href="./quantidades.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quantidades.html">Quantidades</a></li><li class="breadcrumb-item"><a href="./acoes.html"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ações</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">ERtools</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>TODO</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projetos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./projetos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contrVer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Controle de versões</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chunks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Códigos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cabecalho.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Cabeçalho</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./elementos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Elementos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Links</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./figuras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Figuras</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graficos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Tidyverse</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tabelas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Tabelas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./equacoes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Equações</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./diagramas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Diagramas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./refsCruzadas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Referenciação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bibliografia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Bibliografia</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./quantidades.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quantidades</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./acoes.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ações</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./carrega.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Carregamento de dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./estatisticas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Estatísticas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./funcoes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Funções</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ajustes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Ajustes de Dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./receitas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Algumas receitas matemáticas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemplos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Exemplos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mais.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mais</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pacotes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Pacotes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./animacoes2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Animações</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./programacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Testes condicionais e laços</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./docs_exemplo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Documentos exemplificados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exemplos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Exemplos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#alguns-comandos-gerais-para-dados" id="toc-alguns-comandos-gerais-para-dados" class="nav-link active" data-scroll-target="#alguns-comandos-gerais-para-dados"><span class="header-section-number">15.1</span> Alguns comandos gerais para dados</a></li>
  <li><a href="#saída-output-de-informação" id="toc-saída-output-de-informação" class="nav-link" data-scroll-target="#saída-output-de-informação"><span class="header-section-number">15.2</span> Saída (<em>output</em>) de informação</a>
  <ul class="collapse">
  <li><a href="#layout-da-saída" id="toc-layout-da-saída" class="nav-link" data-scroll-target="#layout-da-saída"><span class="header-section-number">15.2.1</span> <em>Layout</em> da saída</a></li>
  </ul></li>
  <li><a href="#entrada-de-informação" id="toc-entrada-de-informação" class="nav-link" data-scroll-target="#entrada-de-informação"><span class="header-section-number">15.3</span> Entrada de informação</a></li>
  <li><a href="#modo-batch" id="toc-modo-batch" class="nav-link" data-scroll-target="#modo-batch"><span class="header-section-number">15.4</span> Modo <em>Batch</em></a></li>
  <li><a href="#manipulação-de-elementos-de-vetor" id="toc-manipulação-de-elementos-de-vetor" class="nav-link" data-scroll-target="#manipulação-de-elementos-de-vetor"><span class="header-section-number">15.5</span> Manipulação de elementos de vetor</a></li>
  <li><a href="#geração-de-sequência-de-dados" id="toc-geração-de-sequência-de-dados" class="nav-link" data-scroll-target="#geração-de-sequência-de-dados"><span class="header-section-number">15.6</span> Geração de sequência de dados</a>
  <ul class="collapse">
  <li><a href="#sequências-pré-definidas" id="toc-sequências-pré-definidas" class="nav-link" data-scroll-target="#sequências-pré-definidas"><span class="header-section-number">15.6.1</span> Sequências pré-definidas</a></li>
  <li><a href="#sequências-aleatórias" id="toc-sequências-aleatórias" class="nav-link" data-scroll-target="#sequências-aleatórias"><span class="header-section-number">15.6.2</span> Sequências aleatórias</a></li>
  </ul></li>
  <li><a href="#criação-de-sequência-por-amostragem" id="toc-criação-de-sequência-por-amostragem" class="nav-link" data-scroll-target="#criação-de-sequência-por-amostragem"><span class="header-section-number">15.7</span> Criação de sequência por amostragem</a></li>
  <li><a href="#criação-e-manipulação-de-vetores" id="toc-criação-e-manipulação-de-vetores" class="nav-link" data-scroll-target="#criação-e-manipulação-de-vetores"><span class="header-section-number">15.8</span> Criação e manipulação de vetores</a>
  <ul class="collapse">
  <li><a href="#vetores-a-partir-de-colagem-de-uma-planilha" id="toc-vetores-a-partir-de-colagem-de-uma-planilha" class="nav-link" data-scroll-target="#vetores-a-partir-de-colagem-de-uma-planilha"><span class="header-section-number">15.8.1</span> Vetores a partir de colagem de uma planilha</a></li>
  <li><a href="#repetição" id="toc-repetição" class="nav-link" data-scroll-target="#repetição"><span class="header-section-number">15.8.2</span> Repetição</a></li>
  </ul></li>
  <li><a href="#crescimento-de-vetores" id="toc-crescimento-de-vetores" class="nav-link" data-scroll-target="#crescimento-de-vetores"><span class="header-section-number">15.9</span> Crescimento de vetores</a></li>
  <li><a href="#criação-de-dataframes-e-matrizes" id="toc-criação-de-dataframes-e-matrizes" class="nav-link" data-scroll-target="#criação-de-dataframes-e-matrizes"><span class="header-section-number">15.10</span> Criação de dataframes e matrizes</a>
  <ul class="collapse">
  <li><a href="#manipulação-de-dataframes" id="toc-manipulação-de-dataframes" class="nav-link" data-scroll-target="#manipulação-de-dataframes"><span class="header-section-number">15.10.1</span> Manipulação de <em>dataframes</em></a></li>
  </ul></li>
  <li><a href="#subconjunto" id="toc-subconjunto" class="nav-link" data-scroll-target="#subconjunto"><span class="header-section-number">15.11</span> Subconjunto</a>
  <ul class="collapse">
  <li><a href="#dados-estatísticos-e-funções-aplicadas-a-dataframes" id="toc-dados-estatísticos-e-funções-aplicadas-a-dataframes" class="nav-link" data-scroll-target="#dados-estatísticos-e-funções-aplicadas-a-dataframes"><span class="header-section-number">15.11.1</span> Dados estatísticos e funções aplicadas a <em>dataframes</em></a></li>
  </ul></li>
  <li><a href="#a-família-apply" id="toc-a-família-apply" class="nav-link" data-scroll-target="#a-família-apply"><span class="header-section-number">15.12</span> A família <code>apply</code></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Ações</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ainda que o objetivo deste material não seja apresentar os meandros de análise de dados e produção de gráficos com o <code>R</code>, faz-se necessário ao momento oferecer algumas ferramentas para a geração de simulações do programa.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Simulações representam uma das melhores maneiras para o aprendizado que envolve relações entre quantidades. Isso decorre da visualização facilitada dessas relações em gráficos, ou mesmo tabelas. Também é possível consolidar a percepção dessas relações variando-se um parâmetro da equação enquanto se observa o resultado. Se essas relações resultarem em tendências curvilineares, também é possível o ajuste de modelos matemáticos.</p>
<section id="alguns-comandos-gerais-para-dados" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="alguns-comandos-gerais-para-dados"><span class="header-section-number">15.1</span> Alguns comandos gerais para dados</h2>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-1_24cc708fa87f030a461ae29411af1f8f">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ot">&lt;-</span> <span class="co"># operador de atribuição (Alt -); o mesmo que "=", embora possa distinguir-se desse didaticamente, apenas ("=" é mais usador para declaração de variáveis)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>CtrL <span class="sc">+</span> Shift <span class="sc">+</span> C <span class="co"># adição de comentário</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>Ctrl <span class="sc">+</span> L <span class="co"># limpa o Console</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>Ctrl <span class="sc">+</span> Shift <span class="sc">+</span> S <span class="co"># executa o script no RStudio</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span>, null <span class="co"># "Not Available", "Non existent"</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">"function"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">demo</span>(lm.glm, <span class="at">package =</span> <span class="st">"stats"</span>, <span class="at">ask =</span> <span class="cn">FALSE</span>) <span class="co"># exemplos e demonstrações de funções</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">3</span>) <span class="co"># fixa no no. de dígitos </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">locale</span>(<span class="at">decimal_mark =</span> <span class="st">","</span>) <span class="co"># útil só pra importação (calc, gnumeric). Evitar para cálculos, já que o `R` opera originalmente com separador "."</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">2</span> <span class="co"># atribuição de variável </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="co"># atribuição de variável (ou...Alt -)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Obs: embora seja uma forma computacional padrão do `R` para diferenciar valores de outros objetos (vetor, por ex), não é recomendável por alguns autores, posto que 1) requer 1 clique a mais pra atribuição, e 2) pode resultar em erro se digitado errado (ex: x&lt; -y, "x menor que menos y")</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a> <span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>()) <span class="co"># remove todos os objetos do ambiente (útil pra evitar problemas com variáveis homônimas)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a> <span class="fu">system.time</span>(<span class="st">"expressão, função, script"</span>) <span class="co"># fornece o tempo decorrido da ação</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a> x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>lmxy <span class="ot">&lt;-</span> <span class="fu">lm</span>(y<span class="sc">~</span>x)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(lmxy) <span class="co"># elenca os objetos disponíveis de uma função após sua execução</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="saída-output-de-informação" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="saída-output-de-informação"><span class="header-section-number">15.2</span> Saída (<em>output</em>) de informação</h2>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-2_623a1f3b95cf51b5630071b9881a931b">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>() <span class="co"># cria um vetor concatenado após convertê-lo a caracter; se mais de um dado, repete a frase a cada</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>() <span class="co"># imprime na tela o conteúdo</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>() <span class="co"># concatena vetor após conversão em caracter, mas juntando a saída numa frase apenas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="layout-da-saída" class="level3" data-number="15.2.1">
<h3 data-number="15.2.1" class="anchored" data-anchor-id="layout-da-saída"><span class="header-section-number">15.2.1</span> <em>Layout</em> da saída</h3>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-3_dc3df9d6ff91c968b81583b31b71a716">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Saída de dados (*output*):</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\n</span><span class="st">"</span> <span class="co"># linha de baixo</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span> <span class="co"># 2 linhas abaixo</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>\t <span class="co"># tabulação </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>\t\t <span class="co"># 2 tabulações</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="st">"%</span><span class="sc">\n</span><span class="st">"</span> <span class="co"># linha de baixo, valor percentual</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="entrada-de-informação" class="level2" data-number="15.3">
<h2 data-number="15.3" class="anchored" data-anchor-id="entrada-de-informação"><span class="header-section-number">15.3</span> Entrada de informação</h2>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-4_4ddf52c150d68ab2f84fa2d4fbfbacc9">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readline</span>() <span class="co"># readline(prompt="Press [enter] to proceed"))</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">scan</span>() <span class="co"># input de valores numéricos para criação de vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modo-batch" class="level2" data-number="15.4">
<h2 data-number="15.4" class="anchored" data-anchor-id="modo-batch"><span class="header-section-number">15.4</span> Modo <em>Batch</em></h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Por vezes é interessante executar um <em>script</em> do <code>R</code> para determinado cálculo ou gráfico, sem a necessidade manual de se entrar no programa, buscar o <em>script</em> e rodá-lo no ambiente.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nesse caso o código pode ser carregado diretamente no <em>shell</em> do sistema operacional, pela janela de comando de <em>prompt</em> (Terminal, se Linux; cmd, se Windows). Para ilustrar, experimente o trecho de código abaixo:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-5_8602fcf5f68693e0f2f017c022edd5b7">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Elaborar o script</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf</span>(<span class="st">"testeBatch.pdf"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x,y)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>dev.off</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Salvar como "tBatch.R"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Comando para o cmd ou Terminal:</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># R CMD BATCH tBatch.R</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Após rodá-lo, o gráfico contido no arquivo “testeBatch.pdf” deverá aparecer no <em>path</em> do <code>R</code> (<em>Home</em>, por exemplo).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A limitação para um <em>script</em> rodado em modo <em>batch</em> é que sua construção deve visar um resultado final, sem entradas intermediárias do usuário.</p>
</section>
<section id="manipulação-de-elementos-de-vetor" class="level2" data-number="15.5">
<h2 data-number="15.5" class="anchored" data-anchor-id="manipulação-de-elementos-de-vetor"><span class="header-section-number">15.5</span> Manipulação de elementos de vetor</h2>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-6_2b575be8e8c6a0750ff5825d19c7016b">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>() <span class="co"># ordem numérica ou alfabética; opção: decreasing = TRUE; alocar NA ao final: na.last=TRUE</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>() <span class="co"># define a ordem</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rev</span>() <span class="co"># reverte a ordem</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>() <span class="co"># remove duplicatas (útil pra estabelecer vetor de fatores em um dataset)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="geração-de-sequência-de-dados" class="level2" data-number="15.6">
<h2 data-number="15.6" class="anchored" data-anchor-id="geração-de-sequência-de-dados"><span class="header-section-number">15.6</span> Geração de sequência de dados</h2>
<section id="sequências-pré-definidas" class="level3" data-number="15.6.1">
<h3 data-number="15.6.1" class="anchored" data-anchor-id="sequências-pré-definidas"><span class="header-section-number">15.6.1</span> Sequências pré-definidas</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A geração de sequências no <code>R</code> exprime na verdade a criação de vetores. Essa pode ocorrer manualmente ou pelo comando <code>seq</code>. Seguem alguns exemplos:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-7_51201b463e378b7c0d363bfd0669637c">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>) <span class="co"># criação manual de vetor; "c" significa "concatenated".</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="co"># espaçamento unitário </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x<span class="ot">=</span><span class="fu">seq</span>(<span class="at">from=</span><span class="dv">0</span>, <span class="at">to=</span><span class="dv">2</span>, <span class="at">by=</span><span class="fl">0.1</span> ) <span class="co"># espaçamento definido</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span><span class="sc">/</span><span class="fl">0.1</span> <span class="co"># operação matemática na criação do vetor</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>x<span class="ot">=</span><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">8</span>,<span class="at">length=</span><span class="fl">0.4</span>) <span class="co"># no. fixo de valores intermediários</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sequências-aleatórias" class="level3" data-number="15.6.2">
<h3 data-number="15.6.2" class="anchored" data-anchor-id="sequências-aleatórias"><span class="header-section-number">15.6.2</span> Sequências aleatórias</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sequências também podem originar-se aleatoriamente, como abaixo:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-8_7edf6ce0ef97ac71ce17a0700794f5ff">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>set.seed <span class="ot">=</span> <span class="dv">2</span> <span class="co"># semente aleatória para reprodutibilidade da simulação</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="co"># "random uniform" (apenas no. de valores)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.74257043 0.77263291 0.82845162 0.48873818 0.64855100 0.05646319
 [7] 0.40489865 0.04155646 0.49129931 0.69602411</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">50</span>,<span class="dv">2</span>,<span class="dv">10</span>) <span class="co"># runif(n,min,max); obs: quando sem atributos, considera-se min=0  e max=1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 3.472742 4.102464 4.060830 3.926758 3.690325 9.381834 4.121709 8.035480
 [9] 4.929705 9.814193 5.501633 5.113694 7.643346 7.182313 7.792147 2.207860
[17] 6.129758 9.039584 4.187971 3.937556 6.314506 8.256878 8.295247 4.639962
[25] 2.031799 2.255353 3.478595 2.965041 9.335832 9.790133 2.508336 8.485602
[33] 3.501524 3.025533 8.618485 4.578911 2.283347 4.015370 4.565211 7.932445
[41] 2.573121 6.620035 4.106883 9.054555 5.183950 5.659865 9.723794 8.298909
[49] 6.459717 9.115827</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">10</span>,<span class="dv">2</span>) <span class="co"># números de distribuição normal; rnorm(n,média,variância); obs: quando sem atributos, considera-se média=0 e var=1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 10.689904 10.280827 10.211135 12.763804  8.038114 12.138921 11.914858
 [8] 13.902723  9.294400 11.163277  8.777674  8.966937 10.022803 10.201417
[15]  5.203107  8.649936 12.837258 10.328762  8.986259  9.062001 11.157146
[22]  9.276889  5.186229  9.725580  8.316294 10.669201  8.233254  7.744139
[29]  9.923752  7.979181 11.482817  8.751646  9.463810  6.747651 10.799573
[36]  8.170025 11.150149  8.036286  8.365816  7.027476 10.325727  8.672471
[43]  8.166128 11.639383 12.198440 10.795656 10.022864 10.887387 10.779879
[50] 11.653001</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>rn<span class="ot">&lt;-</span><span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">10</span>,<span class="dv">2</span>); <span class="fu">ceiling</span>(rn<span class="sc">*</span><span class="dv">10</span>) <span class="co"># geração de números inteiros aleatórios</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 108 113  97 105  72 112  90 120  77 125  99  80  84  87 107 123  96 116  91
[20]  43  97  92 122 119 107 140 112 119  84 105  72 115 113  73  78  84  91  93
[39] 111  86  67 102 123 120 122 162 132  90  89 122</code></pre>
</div>
</div>
</section>
</section>
<section id="criação-de-sequência-por-amostragem" class="level2" data-number="15.7">
<h2 data-number="15.7" class="anchored" data-anchor-id="criação-de-sequência-por-amostragem"><span class="header-section-number">15.7</span> Criação de sequência por amostragem</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A amostragem de um conjunto de dados pode ser considerada interessante quando se tem um subconjunto de dados que deseja-se repetir aleatoriamente:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-9_310ce5769b7cb3f2dabb730efb68585f">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Ala"</span>, <span class="st">"Glu"</span>, <span class="st">"Tyr"</span>, <span class="st">"Val"</span>), <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Tyr" "Glu" "Tyr" "Tyr" "Val" "Ala" "Tyr" "Tyr" "Tyr" "Ala"</code></pre>
</div>
</div>
</section>
<section id="criação-e-manipulação-de-vetores" class="level2" data-number="15.8">
<h2 data-number="15.8" class="anchored" data-anchor-id="criação-e-manipulação-de-vetores"><span class="header-section-number">15.8</span> Criação e manipulação de vetores</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Da mesma forma como as sequências criadas acima, também são os vetores, uma classe específica de objeto do <code>R</code>. Vetores podem ser pensados como colunas de uma planilha, ou linhas da mesma. Para se criar e editar um vetor existem diveras formas, algumas exemplificadas abaixo.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-10_233b274a237124e66a5e100f74829577">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">7</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">14</span><span class="sc">:</span><span class="dv">19</span>); <span class="co"># cria um vetor com valores, "missing values", e sequência</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>xinv <span class="ot">&lt;-</span> <span class="fu">rev</span>(x); xinv <span class="co"># ordem reversa do vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 19 18 17 16 15 14 NA NA  7  7  6  6  5  5  4  3  2  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(x,<span class="dv">8</span>) <span class="co"># adiciona 8 ao vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  5  6  6  7  7 NA NA 14 15 16 17 18 19  8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">7</span>] <span class="co"># remove o 7o. valor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  5  6  7  7 NA NA 14 15 16 17 18 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># apresenta os valores da posição 2 a 5</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>x[x<span class="sc">*</span>x <span class="sc">&gt;</span> <span class="dv">50</span>] <span class="co"># operação em vetor; fornece os elementos cujo quadrado é superior a 50</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA 14 15 16 17 18 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="sc">-</span><span class="dv">2</span>)] <span class="co"># não apresenta os valores nas posições 1 e 2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  3  4  5  5  6  6  7  7 NA NA 14 15 16 17 18 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">9</span>)] <span class="co"># extrai os valores nas posições 1 e 3 do vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span> (x) <span class="co"># remove as duplicatas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7 NA 14 15 16 17 18 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="co"># remove NA ("Not Available") ao aplicar uma função</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 145</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="at">which=</span><span class="dv">5</span><span class="sc">:</span><span class="dv">7</span>) <span class="co"># aplica função em um intervalo</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x,x<span class="sc">&gt;</span><span class="dv">5</span>) <span class="co"># filtra os dados em vetor ou  *dataset*</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  6  6  7  7 14 15 16 17 18 19</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(x,<span class="dv">3</span>) <span class="co"># amostra de 3 elementos</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15 19  3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(x,<span class="dv">3</span>) <span class="co"># repete os dados 3 vezes</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  5  6  6  7  7 NA NA 14 15 16 17 18 19  1  2  3  4  5  5  6
[26]  6  7  7 NA NA 14 15 16 17 18 19  1  2  3  4  5  5  6  6  7  7 NA NA 14 15
[51] 16 17 18 19</code></pre>
</div>
</div>
<section id="vetores-a-partir-de-colagem-de-uma-planilha" class="level3" data-number="15.8.1">
<h3 data-number="15.8.1" class="anchored" data-anchor-id="vetores-a-partir-de-colagem-de-uma-planilha"><span class="header-section-number">15.8.1</span> Vetores a partir de colagem de uma planilha</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Por vezes é mais fácil obter os dados de uma planilha como MS-Excel. Para incorporá-los ao <code>R</code> sem ter que digitá-los, um modo simples envolve copiar a coluna ou linha da planilha, e aplicar a função <code>scan</code>, como segue.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-11_680de13a29f995911d833d82d45bca4f">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fl">1.</span> Copia os dados da planilha;</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fl">2.</span> x <span class="ot">&lt;-</span> <span class="fu">scan</span> () <span class="co"># deverá aparecer um campo no Console para colagem; após essa, dar dar dois cliques para fechar a conexão da função</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Como já apresentado em capítulo anterior, pode-se alternativamente colar os dados de modo mais visível, apresentando-os num <em>script</em>, pelo uso da função <code>read.table</code>.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-12_7114b9ae85b37dcbae5ece478861a037">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>meus.dados <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">header=</span>T, <span class="at">text=</span><span class="st">' # abre a conexão</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="st"># colar os dados</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="st">'</span>) <span class="co"># fecha a conexão</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="repetição" class="level3" data-number="15.8.2">
<h3 data-number="15.8.2" class="anchored" data-anchor-id="repetição"><span class="header-section-number">15.8.2</span> Repetição</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Também faz-se interessante um procedimento automático para a geração de valores repetidos. Isso pode ser de utilidade quando se deseja obter replicatas de resultados a partir de um mesmo valor de premissa. Abaixo seguem alguns exemplos para o comando <code>rep</code>.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-13_37ecc47e5cdebac4971c4752668b776a">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">5</span>,<span class="dv">3</span>) <span class="co"># repete o valor 5 para 3 vezes</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 5 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="dv">4</span>) <span class="co"># repete o vetor 4 vezes</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),<span class="at">each=</span><span class="dv">4</span>) <span class="co"># repete cada valor do vetor 4</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 2 2 2 2 3 3 3 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>( <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">3</span> ) <span class="co"># repete 1 a 4, 3 vezes</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 4 5 6 7 1 2 3 4 5 6 7 1 2 3 4 5 6 7</code></pre>
</div>
</div>
</section>
</section>
<section id="crescimento-de-vetores" class="level2" data-number="15.9">
<h2 data-number="15.9" class="anchored" data-anchor-id="crescimento-de-vetores"><span class="header-section-number">15.9</span> Crescimento de vetores</h2>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-14_6b0dc9c7657b337f4b17b9b52fff68ba">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">length =</span> <span class="dv">5</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>y [ <span class="dv">1</span> ] <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>y [ <span class="dv">2</span> ] <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">3</span><span class="sc">+</span><span class="dv">5</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>y [ <span class="dv">3</span> ] <span class="ot">&lt;-</span> x<span class="sc">/</span><span class="dv">4</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>y [ <span class="dv">4</span> ] <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>y [ <span class="dv">5</span> ] <span class="ot">&lt;-</span> <span class="fu">log10</span>(x)</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4.000000 13.000000  0.500000  1.414214  0.301030</code></pre>
</div>
</div>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-15_b6daa0f6c4fd64d55f7b218f9a4b18ad">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Define função e plot de titulação</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>fa <span class="ot">=</span> <span class="cf">function</span>(pH,pKa) {</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  x<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(pKa)) {</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    x <span class="ot">=</span> x<span class="sc">+</span><span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span> <span class="sc">+</span> <span class="dv">10</span><span class="sc">^</span>(pH <span class="sc">-</span> pKa[i]))}</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>pKa<span class="ot">=</span><span class="fu">c</span>(<span class="fl">2.2</span>,<span class="fl">7.2</span>,<span class="fl">12.7</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="fu">curve</span>(<span class="fu">fa</span>(x,pKa),<span class="dv">1</span>,<span class="dv">14</span>, <span class="at">xlab=</span><span class="st">"pH"</span>, <span class="at">ylab=</span><span class="st">"fa"</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">col=</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="acoes_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="criação-de-dataframes-e-matrizes" class="level2" data-number="15.10">
<h2 data-number="15.10" class="anchored" data-anchor-id="criação-de-dataframes-e-matrizes"><span class="header-section-number">15.10</span> Criação de dataframes e matrizes</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Dataframes</em> são como matrizes, com a diferença de facultar mais de um tipo de objeto (valor, caractere). Como um tipo de matriz, <em>dataframes</em> (quadro de dados, em tradução livre) são mais apropriados à análise de relações quantitativas entre variáveis, gerando gráficos, modelos matemáticos, ajustes decorrentes, e predições. A criação de dataframes pode ser ilustrada abaixo:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-16_4513950a98844e4cf8b854f24c5b1f44">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manualmente:</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">list</span>(</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x  y
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combinando vetores:</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1. Por nomes</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>); v2 <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">27</span>,<span class="dv">28</span>,<span class="dv">29</span>,<span class="dv">30</span>)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(v1,v2)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  v1 v2
1 11 27
2 12 28
3 13 29
4 14 30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 2. Como uma matriz</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(v2,v1)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     v2 v1
[1,] 27 11
[2,] 28 12
[3,] 29 13
[4,] 30 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(v1,v2)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [,1] [,2] [,3] [,4]
v1   11   12   13   14
v2   27   28   29   30</code></pre>
</div>
</div>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-17_c3d85b9fd05e76787d52acbf33d97ea7">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Copiando de uma planilha</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clipr) <span class="co"># requer instalação prévia</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_clip_tbl</span>() <span class="co"># após copiar os dados</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="manipulação-de-dataframes" class="level3" data-number="15.10.1">
<h3 data-number="15.10.1" class="anchored" data-anchor-id="manipulação-de-dataframes"><span class="header-section-number">15.10.1</span> Manipulação de <em>dataframes</em></h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Após a obtenção dos dados, pode-se editá-los para inserção, eliminação, subconjuntos, e para cálculos, como segue.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-18_828cece1df6794401a860976720966b7">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="er">$</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>meus.dados[ri<span class="sc">:</span>rf, <span class="fu">c</span>(ci,cf)]</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span><span class="er">$</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Onde:</p>
<ul>
<li>r = linha (<em>row</em>)</li>
<li>c = coluna (<em>column</em>)</li>
<li>i e f = inicial, final</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ilustrando,</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-19_6fda6b2130f5ee0c0551e6369bb4f24d">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>),</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>)) <span class="co"># criação do dataframe</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(df);<span class="fu">nrow</span>(df) <span class="co"># no. de colunas e de linhas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>dfh <span class="ot">&lt;-</span> <span class="fu">head</span>(df); <span class="fu">print</span>(dfh) <span class="co"># primeiros elementos</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x  y
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10
6 6 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>dft <span class="ot">&lt;-</span> <span class="fu">tail</span>(df); <span class="fu">print</span>(dft) <span class="co"># elementos excetuando-se o primeiro</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x  y
4 4  9
5 5 10
6 6 11
7 7 12
8 8 13
9 9 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df)<span class="ot">=</span><span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"B"</span>); <span class="fu">print</span>(df) <span class="co"># altera nome das colunas (similar: rownames)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B
1 1  6
2 2  7
3 3  8
4 4  9
5 5 10
6 6 11
7 7 12
8 8 13
9 9 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(df) <span class="co"># transposição dos dados</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
A    1    2    3    4    5    6    7    8    9
B    6    7    8    9   10   11   12   13   14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"Z"</span>] <span class="ot">=</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">109</span>; <span class="fu">print</span>(df) <span class="co"># insere vetor coluna</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z
1 1  6 101
2 2  7 102
3 3  8 103
4 4  9 104
5 5 10 105
6 6 11 106
7 7 12 107
8 8 13 108
9 9 14 109</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"x.inv"</span>] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>df<span class="sc">$</span>x; <span class="fu">print</span>(df) <span class="co"># insere um vetor calculado </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z x.inv
1 1  6 101    NA
2 2  7 102    NA
3 3  8 103    NA
4 4  9 104    NA
5 5 10 105    NA
6 6 11 106    NA
7 7 12 107    NA
8 8 13 108    NA
9 9 14 109    NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>W <span class="ot">=</span> <span class="dv">19</span><span class="sc">:</span><span class="dv">27</span>; <span class="fu">print</span>(df) <span class="co"># outra forma de inserção</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z x.inv  W
1 1  6 101    NA 19
2 2  7 102    NA 20
3 3  8 103    NA 21
4 4  9 104    NA 22
5 5 10 105    NA 23
6 6 11 106    NA 24
7 7 12 107    NA 25
8 8 13 108    NA 26
9 9 14 109    NA 27</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>W <span class="ot">=</span> <span class="cn">NULL</span>; <span class="fu">print</span>(df) <span class="co"># remove coluna (NULL, valor nulo; existe mas não é contabilizado)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z x.inv
1 1  6 101    NA
2 2  7 102    NA
3 3  8 103    NA
4 4  9 104    NA
5 5 10 105    NA
6 6 11 106    NA
7 7 12 107    NA
8 8 13 108    NA
9 9 14 109    NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>tot <span class="ot">&lt;-</span> df<span class="sc">$</span>A <span class="sc">+</span> df<span class="sc">$</span>B <span class="sc">+</span> df<span class="sc">$</span>Z; <span class="fu">print</span>(df) <span class="co"># criação de coluna com equação</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z x.inv tot
1 1  6 101    NA 108
2 2  7 102    NA 111
3 3  8 103    NA 114
4 4  9 104    NA 117
5 5 10 105    NA 120
6 6 11 106    NA 123
7 7 12 107    NA 126
8 8 13 108    NA 129
9 9 14 109    NA 132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>df.c2 <span class="ot">&lt;-</span> df[,<span class="sc">-</span><span class="dv">2</span>]; df.c2 <span class="co"># retira a 2a. coluna do dataset</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A   Z x.inv tot
1 1 101    NA 108
2 2 102    NA 111
3 3 103    NA 114
4 4 104    NA 117
5 5 105    NA 120
6 6 106    NA 123
7 7 107    NA 126
8 8 108    NA 129
9 9 109    NA 132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>df.r3 <span class="ot">&lt;-</span> df[<span class="sc">-</span><span class="dv">3</span>,]; df.r3 <span class="co"># retira a 3a. linha do dataset</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A  B   Z x.inv tot
1 1  6 101    NA 108
2 2  7 102    NA 111
4 4  9 104    NA 117
5 5 10 105    NA 120
6 6 11 106    NA 123
7 7 12 107    NA 126
8 8 13 108    NA 129
9 9 14 109    NA 132</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">*</span>df; <span class="fu">print</span>(df2) <span class="co"># cálculo em todo o dataset</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   A  B   Z x.inv tot
1  5 30 505    NA 540
2 10 35 510    NA 555
3 15 40 515    NA 570
4 20 45 520    NA 585
5 25 50 525    NA 600
6 30 55 530    NA 615
7 35 60 535    NA 630
8 40 65 540    NA 645
9 45 70 545    NA 660</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>dfall <span class="ot">&lt;-</span> <span class="fu">merge</span>(df,df2); <span class="fu">print</span>(dfall) <span class="co"># fusão de datasets</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] A     B     Z     x.inv tot  
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Também é possível criar um <em>dataframe</em> como uma matriz, incluindo a nomeação de linhas, com comando de matrizes, <code>dimnames</code>.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-20_1716d106f7b014756b75130606234e01">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">70</span>,<span class="dv">60</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">40</span>,<span class="dv">20</span>),<span class="at">nrow=</span><span class="dv">2</span>, <span class="at">byrow=</span><span class="cn">TRUE</span>,</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">dimnames=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="st">"teste1"</span>, <span class="st">"teste2"</span>), <span class="fu">c</span>(<span class="st">"controle"</span>, <span class="st">"método1"</span>, <span class="st">"método2"</span>)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="subconjunto" class="level2" data-number="15.11">
<h2 data-number="15.11" class="anchored" data-anchor-id="subconjunto"><span class="header-section-number">15.11</span> Subconjunto</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subconjunto de dados são de extrema valia quando se deseja focar num determinado intervalo dos dados, quer para visualização (gráficos) como para análises (ajuste de modelos). O comando <code>subset</code> que implica em subconjuntos é ilustrado abaixo.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-21_ed2725d85cf8f251305eb685dc918a17">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">list</span>(</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>),</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>),</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z=</span> <span class="fu">rep</span>(LETTERS[ <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> ],<span class="dv">3</span>)));<span class="fu">print</span>(df) <span class="co"># criação do dataframe</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, x<span class="sc">&gt;</span><span class="dv">2</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, x<span class="sc">&lt;</span><span class="dv">7</span><span class="sc">&amp;</span>y<span class="sc">&gt;</span><span class="dv">8</span>)</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)] <span class="co"># subconjunto (extrai as linhas de 1 a 7, e as colunas 1 e 2)</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>z <span class="sc">==</span><span class="st">"B"</span>, ] <span class="co"># apresenta os dados (linhas) de um nível específico</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>z <span class="sc">!=</span> <span class="st">"B"</span>,] <span class="co"># exclui um nível específico</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="dados-estatísticos-e-funções-aplicadas-a-dataframes" class="level3" data-number="15.11.1">
<h3 data-number="15.11.1" class="anchored" data-anchor-id="dados-estatísticos-e-funções-aplicadas-a-dataframes"><span class="header-section-number">15.11.1</span> Dados estatísticos e funções aplicadas a <em>dataframes</em></h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Também é possível extrair valores estatísticos de colunas, linhas, ou de todo o quadro de dados, como segue.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-22_6a16829ce3ecef0b3cb914eff63e8277">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">list</span>(</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>),</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>),</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z=</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>,<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">22</span>,<span class="dv">23</span>,<span class="dv">24</span>)));<span class="fu">print</span>(df) <span class="co"># criação do dataframe</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>x) <span class="co"># média da coluna "x" (também var, sd, min, max, range, sum)</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(df[<span class="dv">1</span>,]) <span class="co"># soma a linha 1 de todas as colunas</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(df[<span class="dv">3</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]) <span class="co"># limite de valores das colunas 2 a 3, e somente na 3a. linha</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(df,<span class="dv">1</span>,mean) <span class="co"># calcula a média em cada linha</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(df,<span class="dv">2</span>,sd) <span class="co"># calcula o desvio-padrão em cada coluna colunas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nas situações em que um <em>dataframe</em> possui dados multivariados (subgrupos ou <em>nível</em>), é possível extrair parâmetros estatísticos para cada nível, ou subgrupos de dados, como abaixo.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-23_39aa65531664869f7f723641023a3a5d">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">list</span>(</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>),</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>),</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z=</span> <span class="fu">rep</span>(LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>],<span class="dv">3</span>)));<span class="fu">print</span>(df) <span class="co"># criação do dataframe com níveis A, B, e C</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x  y z
1 1  6 A
2 2  7 B
3 3  8 C
4 4  9 A
5 5 10 B
6 6 11 C
7 7 12 A
8 8 13 B
9 9 14 C</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>y [ df<span class="sc">$</span>z <span class="sc">==</span> <span class="st">"B"</span> ] ) <span class="co"># em um subnível</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(df<span class="sc">$</span>y, df<span class="sc">$</span>z, mean) <span class="co"># em cada nível de uma variável</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> A  B  C 
 9 10 11 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(df [<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>,] , <span class="at">FUN=</span> mean) <span class="co"># em cada variável do dataset </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(X[[i]], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> x  y  z 
 5 10 NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Também sd, var, length, min, max, etc.</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="a-família-apply" class="level2" data-number="15.12">
<h2 data-number="15.12" class="anchored" data-anchor-id="a-família-apply"><span class="header-section-number">15.12</span> A família <code>apply</code></h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A iteração por <em>loops</em> (laços) no <code>R</code> é bastante frequente em programação. Contudo, o uso de comandos iterativos, como o laço <em>for</em>, pode consumir tempo computacional significativo quando aplicado a grande conjunto de dados, como vetores, matrizes, e <em>dataframes</em>.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dessa forma o uso de <em>vetorização</em> surge como alternativa nesses casos, e mesmo para <em>programação paralela</em>. A vetorização só não é indicada nos casos em que a alteração de um elemento do vetor depende de outros elementos, situação em que a função <em>for</em> é mais prolífica.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No <code>R</code> existe um família de funções para aplicação em vetores e construções correlatas, a família de comandos <code>apply</code>, e dentre os principais:</p>
<ol type="1">
<li>Comando <code>apply</code>;</li>
<li>Comando `tapply;</li>
<li>Comando <code>sapply</code>;</li>
<li>Comando <code>mapply</code>.</li>
</ol>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Também presentes, embora menos utilizados:</p>
<ol type="1">
<li>Comando <code>vapply</code>;</li>
<li>Comando <code>rapply</code>;</li>
<li>Comando <code>bapply</code>;</li>
<li>Comando <code>eapply</code>.</li>
</ol>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Em síntese, esses comandos são aplicados em programação vetorial para uso de funções pré-estabelecidas (como média, variância) ou criadas pelo usuário, e direcionadas a vetores, matrizes, listas, e <em>dataframes</em>. Diferem, além do alvo pretendido, também pelo registro de saída (<em>output</em>), se vetor ou lista, por exemplo. Seguem suas descrições.</p>
<section id="o-comando-apply" class="level4" data-number="15.12.0.1">
<h4 data-number="15.12.0.1" class="anchored" data-anchor-id="o-comando-apply"><span class="header-section-number">15.12.0.1</span> O comando <code>apply</code></h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;É o mais genérico de todos, podendo ser aplicado a um vetor (<em>array</em>) ou matriz.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-24_b4b011810727e8ea0392e8a890afd6cc">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,<span class="at">nrow=</span><span class="dv">3</span>);m</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">1</span>,sum) <span class="co"># em matriz; índice 1 -&gt; linhas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22 26 30</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">2</span>,sum) <span class="co"># em matriz; índice 2 -&gt; colunas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 15 24 33</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow=</span><span class="dv">1</span>)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(n,<span class="dv">1</span>,sum) <span class="co"># em vetor, embora identificado como matriz de uma linha, já que `apply` não é para uso em vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 78</code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Caso haja elementos desconhecidos nos dados (<em>NA</em>), é necessário sua remoção para efetivar o cálculo (nessa família, como nos demais comandos para o mesmo fim, no <code>R</code>). Exemplificando:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-25_9beeaba3333c860ba492880a0c8ba0e9">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,<span class="at">nrow=</span><span class="dv">3</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>m[<span class="dv">3</span>,<span class="dv">4</span>]<span class="ot">&lt;-</span> <span class="cn">NA</span>; m <span class="co"># insere NA na linha 3 da coluna 4</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">1</span>,sum) <span class="co"># em matriz; índice 1 -&gt; linhas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22 26 NA</code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Veja que a função não foi computada para a célula contendo <em>NA</em>. Para removê-la do cálculo:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-26_cebca00a61f39c1c5d5d156dbef9cb4c">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">1</span>,sum,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22 26 18</code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Em adição, <code>apply</code> pode aplicar-se também a colunas.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-27_286b6cb9799dad5986e8d78842ac5a35">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">1</span>,sum,<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="co"># em linha</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22 26 18</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">2</span>,sum,<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="co"># em coluna</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 15 24 21</code></pre>
</div>
</div>
<section id="aplicando-apply-a-uma-função-arbitrária" class="level5" data-number="15.12.0.1.1">
<h5 data-number="15.12.0.1.1" class="anchored" data-anchor-id="aplicando-apply-a-uma-função-arbitrária"><span class="header-section-number">15.12.0.1.1</span> Aplicando <code>apply</code> a uma função arbitrária</h5>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-28_e2ad9074bc28d664055b060e88656751">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">=</span> <span class="cf">function</span>(x) <span class="fu">mean</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(m,<span class="dv">1</span>,f)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 41.5 53.5   NA</code></pre>
</div>
</div>
</section>
</section>
<section id="o-comando-lapply" class="level4" data-number="15.12.0.2">
<h4 data-number="15.12.0.2" class="anchored" data-anchor-id="o-comando-lapply"><span class="header-section-number">15.12.0.2</span> O comando <code>lapply</code></h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Similar ao anterior, mas aplicado a uma <em>lista</em> (<em>l</em> para lista), como no exemplo a seguir.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-29_6a3f90e304fdd315609e311db436bb29">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span><span class="fu">list</span>(<span class="at">operacao=</span><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,<span class="at">nrow=</span><span class="dv">4</span>),<span class="at">entrada=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="at">saida=</span><span class="dv">7</span>, <span class="at">custo=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>));l</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$operacao
     [,1] [,2] [,3]
[1,]    1    5    9
[2,]    2    6   10
[3,]    3    7   11
[4,]    4    8   12

$entrada
[1] 1 2 3 4 5 6 7

$saida
[1] 7

$custo
[1] 1 2 3</code></pre>
</div>
</div>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-30_eeda621208f01ddb81ca811cc2ec3f01">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>ll <span class="ot">&lt;-</span> <span class="fu">lapply</span>(l,sum); ll</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$operacao
[1] 78

$entrada
[1] 28

$saida
[1] 7

$custo
[1] 6</code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Para converter esse resultado num vetor:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-31_16adea82a1d21cafe1373bb883017331">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>ull <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(ll,sum)); ull</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>operacao  entrada    saida    custo 
      78       28        7        6 </code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;E para converter o vetor numa tabela:</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-32_5efff06be7682240059685fb9406b88b">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>df.ll <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(ull)</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df.ll, <span class="at">caption =</span> <span class="st">"Orçamento geral"</span>, <span class="st">"pipe"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Orçamento geral</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">operacao</td>
<td style="text-align: right;">78</td>
</tr>
<tr class="even">
<td style="text-align: left;">entrada</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">saida</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">custo</td>
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Observe que o uso da função <code>kable</code> exige a entrada seja de uma lista ou matriz, razão da conversão intermediária nessa última.</p>
</section>
<section id="o-comando-sapply" class="level4" data-number="15.12.0.3">
<h4 data-number="15.12.0.3" class="anchored" data-anchor-id="o-comando-sapply"><span class="header-section-number">15.12.0.3</span> O comando <code>sapply</code></h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Semelhante ao `lapply, embora com saída mais confortável, diretamente para um vetor (<em>s</em> para “simplify”).</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-33_7f98904be34380fb27546223cbcb6a1d">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(l,sum)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>operacao  entrada    saida    custo 
      78       28        7        6 </code></pre>
</div>
</div>
</section>
<section id="o-comando-mapply" class="level4" data-number="15.12.0.4">
<h4 data-number="15.12.0.4" class="anchored" data-anchor-id="o-comando-mapply"><span class="header-section-number">15.12.0.4</span> O comando <code>mapply</code></h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Com o nome indicando uma aplicação para variação múltipla (“multi-variant apply”), <code>mapply</code> permite uma flexibilidade para uso de funções arbitrárias, como no exemplo abaixo.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-34_f8963201adb3216cb8d5c07b19279ab1">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="at">a=</span><span class="dv">25</span>,<span class="at">b=</span><span class="dv">12</span>,<span class="at">c=</span><span class="dv">42</span>)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a> y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="at">d=</span><span class="dv">43</span>,<span class="at">e=</span><span class="dv">55</span>,<span class="at">f=</span><span class="dv">12</span>) <span class="co"># criação de 2 vetores</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a> soma.vec <span class="ot">&lt;-</span><span class="cf">function</span>(u,v){</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>  (u<span class="sc">+</span>v)<span class="sc">*</span><span class="dv">2</span> <span class="co"># criação de função de soma de vetores</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(soma.vec,x,y) <span class="co"># aplicação de `mapply` à função criada</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  a   b   c 
136 134 108 </code></pre>
</div>
</div>
</section>
<section id="o-comando-tapply" class="level4" data-number="15.12.0.5">
<h4 data-number="15.12.0.5" class="anchored" data-anchor-id="o-comando-tapply"><span class="header-section-number">15.12.0.5</span> O comando <code>tapply</code></h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Indicado para a aplicação de função a elementos de um vetor (<em>array</em>). E, em especial, a sumários estatísticos (<code>mean</code>, <code>sd</code>, <code>var</code>, <code>max</code>, <code>min</code>, <code>range</code>) para diferentes fatores.</p>
<div class="cell" data-hash="acoes_cache/html/unnamed-chunk-35_dca75504f0b822bfed369743366e9c0f">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">list</span>(</span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>),</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>),</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">grup =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"A"</span>,<span class="dv">3</span>),<span class="fu">rep</span>(<span class="st">"B"</span>,<span class="dv">3</span>),<span class="fu">rep</span>(<span class="st">"C"</span>,<span class="dv">3</span>))))</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(df<span class="sc">$</span>y, df<span class="sc">$</span>grup, mean)  </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> A  B  C 
 7 10 13 </code></pre>
</div>
</div>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resumindo a aplicação da família <code>apply</code>:</p>
<ol type="1">
<li>Comando <code>apply</code>: vetor;</li>
<li>Comando<code>lapply</code>: lista;</li>
<li>Comando<code>sapply</code>: simplifica <code>lapply</code> pra saída como vetor;</li>
<li>Comando<code>mapply</code>: versão multivariada de <code>lapply</code>;</li>
<li>Comando<code>tapply</code>: vetor de matriz ou <em>dataframe</em>.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./quantidades.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Quantidades</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./carrega.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Carregamento de dados</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>